# å›¾ç‰‡æ ‡å‡†åŒ–å…¥å£éªŒè¯

## âœ… æ‰€æœ‰å›¾ç‰‡åŠ è½½å…¥å£å·²æ ‡å‡†åŒ–

æ‰€æœ‰ä½¿ç”¨ `tool.get_image()` çš„åœ°æ–¹å·²å…¨éƒ¨æ›¿æ¢ä¸º `tool.get_image_hd()`ï¼Œç¡®ä¿ç»Ÿä¸€çš„ç¼©æ”¾æ ‡å‡†ã€‚

## ğŸ“ å·²ä¿®å¤çš„å›¾ç‰‡åŠ è½½å…¥å£

### 1. æ¤ç‰©ç³»ç»Ÿ (`source/component/plant.py`)

#### âœ… Plant.loadFrames()
- **ä½ç½®**: ç¬¬ 131-144 è¡Œ
- **ä½œç”¨**: åŠ è½½æ‰€æœ‰æ¤ç‰©çš„åŠ¨ç”»å¸§
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='plants', name=æ¤ç‰©å)`

#### âœ… Bullet.loadFrames()
- **ä½ç½®**: ç¬¬ 58-71 è¡Œ
- **ä½œç”¨**: åŠ è½½å­å¼¹å›¾ç‰‡
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='bullets', name=å­å¼¹å)`

#### âœ… Car.__init__()
- **ä½ç½®**: ç¬¬ 8-20 è¡Œ
- **ä½œç”¨**: åŠ è½½å°æ¨è½¦å›¾ç‰‡
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='effects', name='car')`

#### âœ… CherryBomb.setBoom()
- **ä½ç½®**: ç¬¬ 365-376 è¡Œ
- **ä½œç”¨**: åŠ è½½æ¨±æ¡ƒç‚¸å¼¹çˆ†ç‚¸æ•ˆæœ
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='effects', name='Boom')`

### 2. åƒµå°¸ç³»ç»Ÿ (`source/component/zombie.py`)

#### âœ… Zombie.loadFrames()
- **ä½ç½®**: ç¬¬ 42-61 è¡Œ
- **ä½œç”¨**: åŠ è½½æ‰€æœ‰åƒµå°¸çš„åŠ¨ç”»å¸§
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='zombies', name=åƒµå°¸å)`

### 3. UI ç³»ç»Ÿ (`source/component/menubar.py`)

#### âœ… Card.loadFrame()
- **ä½ç½®**: ç¬¬ 112-122 è¡Œ
- **ä½œç”¨**: åŠ è½½æ¤ç‰©å¡ç‰‡å›¾ç‰‡
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='cards')`

#### âœ… MenuBar.loadFrame()
- **ä½ç½®**: ç¬¬ 197-204 è¡Œ
- **ä½œç”¨**: åŠ è½½èœå•æ èƒŒæ™¯
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='menubar')`

#### âœ… Panel.loadFrame()
- **ä½ç½®**: ç¬¬ 419-434 è¡Œ
- **ä½œç”¨**: åŠ è½½é€‰æ‹©é¢æ¿å’Œå¼€å§‹æŒ‰é’®
- **ä¿®æ”¹**: æ ¹æ®å›¾ç‰‡åç§°è‡ªåŠ¨é€‰æ‹©é…ç½®
  - ChooserBackground â†’ `name='menubar'`
  - PanelBackground â†’ `name='panel'`
  - StartButton â†’ `name='startbutton'`

#### âœ… MoveBar.loadFrame()
- **ä½ç½®**: ç¬¬ 626-631 è¡Œ
- **ä½œç”¨**: åŠ è½½ä¼ é€å¸¦èƒŒæ™¯
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='movebar')`

#### âœ… MoveCard.loadFrame()
- **ä½ç½®**: ç¬¬ 561-583 è¡Œ
- **ä½œç”¨**: åŠ è½½ä¼ é€å¸¦å¡ç‰‡
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='cards')`

### 4. æ¸¸æˆå…³å¡ (`source/state/level.py`)

#### âœ… Level.setupMouseImage()
- **ä½ç½®**: ç¬¬ 400-428 è¡Œ
- **ä½œç”¨**: åŠ è½½æ‹–æ‹½æ¤ç‰©æ—¶é¼ æ ‡è·Ÿéšçš„å›¾ç‰‡ï¼ˆæœ€é‡è¦ï¼ï¼‰
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='plants', name=æ¤ç‰©å)`
- **è¯´æ˜**: è¿™æ˜¯è§£å†³"æ‹–æ‹½æ—¶å›¾ç‰‡è¿‡å¤§"é—®é¢˜çš„å…³é”®

### 5. ä¸»èœå• (`source/state/mainmenu.py`)

#### âœ… Menu.setupBackground()
- **ä½ç½®**: ç¬¬ 19-24 è¡Œ
- **ä½œç”¨**: åŠ è½½ä¸»èœå•èƒŒæ™¯
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='mainmenu_bg')`

#### âœ… Menu.setupOption()
- **ä½ç½®**: ç¬¬ 26-32 è¡Œ
- **ä½œç”¨**: åŠ è½½å†’é™©æ¨¡å¼æŒ‰é’®
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='adventure_button')`

### 6. æ¸¸æˆç»“æŸå±å¹• (`source/state/screen.py`)

#### âœ… Screen.setupImage()
- **ä½ç½®**: ç¬¬ 27-32 è¡Œ
- **ä½œç”¨**: åŠ è½½èƒœåˆ©/å¤±è´¥å±å¹•
- **ä¿®æ”¹**: ä½¿ç”¨ `get_image_hd(category='ui', name='endscreen')`

## ğŸ“Š ç»Ÿè®¡

| æ–‡ä»¶ | ä¿®æ”¹ç‚¹æ•° | è¯´æ˜ |
|------|---------|------|
| plant.py | 4 | æ¤ç‰©ã€å­å¼¹ã€æ¨è½¦ã€çˆ†ç‚¸æ•ˆæœ |
| zombie.py | 1 | æ‰€æœ‰åƒµå°¸ |
| menubar.py | 5 | å¡ç‰‡ã€èœå•æ ã€é¢æ¿ã€æŒ‰é’®ã€ä¼ é€å¸¦ |
| level.py | 1 | **æ‹–æ‹½æ¤ç‰©ï¼ˆæœ€é‡è¦ï¼‰** |
| mainmenu.py | 2 | ä¸»èœå•èƒŒæ™¯å’ŒæŒ‰é’® |
| screen.py | 1 | æ¸¸æˆç»“æŸå±å¹• |
| **æ€»è®¡** | **14** | **æ‰€æœ‰å›¾ç‰‡åŠ è½½å…¥å£** |

## ğŸ¯ é…ç½®è¦†ç›–

æ‰€æœ‰å›¾ç‰‡ç±»åˆ«éƒ½åœ¨ `display_config.json` ä¸­æœ‰å¯¹åº”é…ç½®ï¼š

```json
{
  "plants": { ... },      // æ‰€æœ‰æ¤ç‰©
  "zombies": { ... },     // æ‰€æœ‰åƒµå°¸
  "bullets": { ... },     // æ‰€æœ‰å­å¼¹
  "ui": {                 // æ‰€æœ‰ UI å…ƒç´ 
    "cards": { ... },           // å¡ç‰‡
    "menubar": { ... },         // èœå•æ 
    "panel": { ... },           // é€‰æ‹©é¢æ¿
    "movebar": { ... },         // ä¼ é€å¸¦
    "startbutton": { ... },     // å¼€å§‹æŒ‰é’®
    "mainmenu_bg": { ... },     // ä¸»èœå•èƒŒæ™¯
    "adventure_button": { ... }, // å†’é™©æŒ‰é’®
    "endscreen": { ... }        // ç»“æŸå±å¹•
  },
  "effects": {            // ç‰¹æ•ˆå’Œå…¶ä»–
    "Boom": { ... },           // çˆ†ç‚¸æ•ˆæœ
    "IceTrap": { ... },        // å†°å†»é™·é˜±
    "car": { ... }             // å°æ¨è½¦
  },
  "sun": { ... }          // é˜³å…‰
}
```

## âœ¨ æ ‡å‡†åŒ–æ•ˆæœ

ç°åœ¨æ‰€æœ‰å›¾ç‰‡éƒ½ç»è¿‡ç»Ÿä¸€çš„å¤„ç†æµç¨‹ï¼š

```
åŸå§‹å›¾ç‰‡ï¼ˆä»»æ„å°ºå¯¸ï¼‰
    â†“
plant.json/zombie.jsonï¼ˆä½¿ç”¨å®é™…å°ºå¯¸ï¼Œä¸è£å‰ªï¼‰
    â†“
get_image_hdï¼ˆè‡ªåŠ¨æ£€æµ‹å€ç‡ï¼‰
    â†“
display_config.jsonï¼ˆç»Ÿä¸€æ˜¾ç¤ºå°ºå¯¸ï¼‰
    â†“
apply_scale_modeï¼ˆä¿æŒæ¯”ä¾‹ç¼©æ”¾ï¼‰
    â†“
æ¸¸æˆä¸­æ˜¾ç¤ºï¼ˆç»Ÿä¸€æ ‡å‡†ï¼‰
```

## ğŸ” éªŒè¯æ–¹æ³•

æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ä½¿ç”¨æ—§æ–¹æ³•çš„åœ°æ–¹ï¼š

```bash
# æœç´¢æ‰€æœ‰ä½¿ç”¨ tool.get_image( çš„åœ°æ–¹
grep -rn "tool\.get_image(" source/

# åº”è¯¥æ²¡æœ‰ä»»ä½•ç»“æœï¼Œå› ä¸ºéƒ½å·²æ”¹ä¸º get_image_hd
```

## ğŸ“ å¼€å‘è§„èŒƒ

ä»¥åæ·»åŠ æ–°çš„å›¾ç‰‡åŠ è½½ä»£ç æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

### âœ… æ­£ç¡®åšæ³•

```python
# ä½¿ç”¨ get_image_hdï¼ŒæŒ‡å®š category å’Œ name
image = tool.get_image_hd(
    frame, x, y, width, height,
    colorkey, scale,
    category='plants',  # å¿…é¡»æŒ‡å®šç±»åˆ«
    name='Peashooter'   # å»ºè®®æŒ‡å®šå…·ä½“åç§°
)
```

### âŒ é”™è¯¯åšæ³•

```python
# ä¸è¦ç›´æ¥ä½¿ç”¨ get_image
image = tool.get_image(frame, x, y, width, height, colorkey, scale)
```

## ğŸ› ï¸ é…ç½®è°ƒæ•´

å¦‚æœæŸä¸ªå›¾ç‰‡æ˜¾ç¤ºå¤§å°ä¸åˆé€‚ï¼Œåªéœ€ä¿®æ”¹ `display_config.json`ï¼š

```json
{
  "plants": {
    "specific": {
      "Chomper": {
        "width": 101,   // è°ƒæ•´è¿™é‡Œ
        "height": 137,  // è°ƒæ•´è¿™é‡Œ
        "scale_mode": "keep_ratio"
      }
    }
  }
}
```

ä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç ï¼

## âœ… æ€»ç»“

- âœ… æ‰€æœ‰ 14 ä¸ªå›¾ç‰‡åŠ è½½å…¥å£å·²æ ‡å‡†åŒ–
- âœ… æ‰€æœ‰å›¾ç‰‡ç±»åˆ«éƒ½æœ‰é…ç½®æ”¯æŒ
- âœ… æ‹–æ‹½æ¤ç‰©æ—¶çš„å›¾ç‰‡å¤§å°é—®é¢˜å·²è§£å†³
- âœ… æ‰€æœ‰å›¾ç‰‡ä¿æŒç»Ÿä¸€çš„æ˜¾ç¤ºæ¯”ä¾‹
- âœ… é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ˜¾ç¤ºå°ºå¯¸

ç°åœ¨æ‚¨å¯ä»¥æ”¾å¿ƒåœ°æ›¿æ¢ä»»ä½•é«˜æ¸…å›¾ç‰‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ç¼©æ”¾å’Œæ¯”ä¾‹ï¼Œç¡®ä¿æ¸¸æˆå†…æ‰€æœ‰å›¾ç‰‡éƒ½ä¿æŒç»Ÿä¸€çš„æ ‡å‡†ï¼
